{{/* /home/server/development/hugo-blog/openVERS/layouts/partials/toc.html */}}
{{ $showToc := false }}
{{/* Default logic: show if word count is sufficient AND toc is not explicitly disabled in frontmatter */}}
{{ if and (gt .WordCount (.Site.Params.BookTocWordCount | default 400)) (ne .Params.toc false) }}
  {{ $showToc = true }}
{{ end }}
{{/* Override: if toc is explicitly true in frontmatter, ensure it's shown */}}
{{ if eq .Params.toc true }}
  {{ $showToc = true }}
{{ end }}
{{/* Override: if toc is explicitly false in frontmatter, ensure it's hidden */}}
{{ if eq .Params.toc false }}
  {{ $showToc = false }}
{{ end }}

{{/* Final check: also ensure .TableOfContents actually has content */}}
{{ if and $showToc .TableOfContents }}
<div class="taxonomy-terms-cloud td-toc mt-3 mb-3 td-page-meta" style="opacity: 1;"> {{/* td-page-meta class is from original docsy, keeping it */}}
  <h5 class="taxonomy-title">Contents</h5>
  <nav id="TableOfContents" class="td-page-toc__nav">
    <ul>{{ .TableOfContents }}</ul>
  </nav>
</div>
{{ end }}