<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://openvers.github.io/docs_blog/docs/cloud_setup/azure/><link rel=alternate type=application/rss+xml href=https://openvers.github.io/docs_blog/docs/cloud_setup/azure/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/docs_blog/favicons/favicon.ico><link rel=apple-touch-icon href=/docs_blog/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/docs_blog/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/docs_blog/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/docs_blog/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/docs_blog/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/docs_blog/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/docs_blog/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/docs_blog/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/docs_blog/favicons/android-192x192.png sizes=192x192><title>Microsoft Azure | OpenVERS</title><meta name=description content="Azure - A comprehensive cloud computing platform provided by Microsoft.
"><meta property="og:title" content="Microsoft Azure"><meta property="og:description" content="Azure - A comprehensive cloud computing platform provided by Microsoft.
"><meta property="og:type" content="website"><meta property="og:url" content="https://openvers.github.io/docs_blog/docs/cloud_setup/azure/"><meta property="og:site_name" content="OpenVERS"><meta itemprop=name content="Microsoft Azure"><meta itemprop=description content="Azure - A comprehensive cloud computing platform provided by Microsoft.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Microsoft Azure"><meta name=twitter:description content="Azure - A comprehensive cloud computing platform provided by Microsoft.
"><link rel=preload href=/docs_blog/scss/main.min.44e056411013bf8f18a255176cfb0420600587168abb56228837c1f35a8df1c0.css as=style><link href=/docs_blog/scss/main.min.44e056411013bf8f18a255176cfb0420600587168abb56228837c1f35a8df1c0.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/docs_blog/><span class="navbar-brand__logo navbar-logo"><svg width="128" height="128" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><title>OpenVERS Icon - White Background</title><desc>A dimensional icon for Open Data Versatility with a white background circle. It features an open deep blue ring and three bright teal lines with an enhanced extruded effect suggesting depth.</desc><style>.fill-none{fill:none}.stroke-linecap-round{stroke-linecap:round}.circle-main-style{stroke:#3b4856;stroke-width:10}.circle-depth-style{stroke:#072a5c;stroke-width:10}.line-main-style{stroke:#009cff;stroke-width:8}.line-depth-style{stroke:#007a8a;stroke-width:8}.line-accent-shadow-style{stroke:#005f6b;stroke-width:2}.bg-circle-style{fill:#fff}</style><circle class="bg-circle-style" cx="50" cy="50" r="50"/><path d="M86.5 51.5a35 35 0 11-35-35" class="fill-none stroke-linecap-round circle-depth-style"/><path d="M85 50A35 35 0 1150 15" class="fill-none stroke-linecap-round circle-main-style"/><g class="fill-none stroke-linecap-round line-accent-shadow-style"><line x1="52.5" y1="52.5" x2="79.5" y2="25.5"/><line x1="52.5" y1="52.5" x2="26.5" y2="37.5"/><line x1="52.5" y1="52.5" x2="52.5" y2="82.5"/></g><g class="fill-none stroke-linecap-round line-depth-style"><line x1="51.5" y1="51.5" x2="78.5" y2="24.5"/><line x1="51.5" y1="51.5" x2="25.5" y2="36.5"/><line x1="51.5" y1="51.5" x2="51.5" y2="81.5"/></g><g class="fill-none stroke-linecap-round line-main-style"><line x1="50" y1="50" x2="77" y2="23"/><line x1="50" y1="50" x2="24" y2="35"/><line x1="50" y1="50" x2="50" y2="80"/></g></svg></span><span class=navbar-brand__name>OpenVERS</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs_blog/about/><span>About</span></a></li><li class=nav-item><a class=nav-link href=/docs_blog/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/docs_blog/community/><span>Community</span></a></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs_blog/docs/cloud_setup/azure/>Return to the regular view of this page</a>.</p></div><h1 class=title>Microsoft Azure</h1><div class=lead>Azure - A comprehensive cloud computing platform provided by Microsoft.</div><ul><li>1: <a href=#pg-49076824f59c97f04453eaf3b3f6dbae>Account Setup</a></li><li>2: <a href=#pg-2272d5c519c02840f7ed49134a7bb4c7>Terraform Backend</a></li><li>3: <a href=#pg-1c163698e334dd4401ddcdc57074abd9>OpenID Connect</a></li></ul><div class=content><p>Microsoft Azure is a comprehensive cloud computing platform that offers a wide array of services, including computing, storage, databases, analytics, artificial intelligence, Internet of Things (IoT), and more. Azure enables data practitioners and developers to build, deploy, and manage applications and workloads in a flexible, scalable, and secure global network. When setting up Azure for the first time, establishing robust security measures is paramount for data practitioners to ensure the confidentiality, integrity, and availability of their data and applications. Without proper security configurations, sensitive information can be exposed to unauthorized access, and accounts can become vulnerable to malicious activities if credentials are compromised. It&rsquo;s crucial to implement security best practices, such as Azure Active Directory (Azure AD) for identity and access management, Role-Based Access Control (RBAC), network security groups (NSGs), and Azure Security Center recommendations. By prioritizing security from the outset, data practitioners can mitigate common risks like overly permissive access, unsecured storage accounts, and compromised credentials.</p><h1 id=getting-started>Getting Started<a class=td-heading-self-link href=#getting-started aria-label="Heading self-link"></a></h1><p>The <strong>Azure CLI</strong> is a powerful command-line tool that allows users to interact with Azure services, enabling them to manage and automate various tasks such as creating and managing resources, deploying applications, and configuring services. Please visit the <a href=https://docs.microsoft.com/cli/azure/install-azure-cli>Official Azure CLI Installation Instructions</a> to review the installation steps for your operating system.</p><p>For a comprehensive development experience, consider these additional tools:</p><ul><li><strong>Azure PowerShell</strong>: Provides a set of cmdlets to manage Azure resources directly from PowerShell. <a href=https://docs.microsoft.com/powershell/azure/new-azureps-module-az>Learn more about Azure PowerShell</a>.</li><li><strong>Azure SDKs</strong>: Available for various programming languages (e.g., Python, .NET, Java, Node.js) to interact with Azure services programmatically. <a href=https://azure.microsoft.com/downloads/>Explore Azure SDKs</a>.</li><li><strong>Azure Tools for Visual Studio Code</strong>: An extension that makes it easy to develop and deploy to Azure directly from VS Code. <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack">Install Azure Tools for VS Code</a>.</li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-49076824f59c97f04453eaf3b3f6dbae>1 - Account Setup</h1><div class=lead>Azure - New Account Setup with Critical Security Measures Applied as First Priority.</div><h2 id=setup-new-azure-account>Setup New Azure Account<a class=td-heading-self-link href=#setup-new-azure-account aria-label="Heading self-link"></a></h2><p>Creating an Azure account can often start with a <a href=https://azure.microsoft.com/free/>free tier offering</a>. Similar to other cloud providers, establishing robust security measures from the beginning is crucial to protect your Azure resources, data, and identities from unauthorized access and potential threats. We will follow Azure&rsquo;s recommended practices for a secure initial setup.</p><h3 id=azure-resource-groups>Azure Resource Groups<a class=td-heading-self-link href=#azure-resource-groups aria-label="Heading self-link"></a></h3><p>Azure resource groups are a fundamental concept in Azure to organize resource into specific use case groups for cost and monitoring purposes. Before being able to create an resources in Azure, a <a href=https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-portal>Resource Group</a> must be created.</p><h3 id=microsoft-entra-id-azure-ad-foundation>Microsoft Entra ID (Azure AD) Foundation<a class=td-heading-self-link href=#microsoft-entra-id-azure-ad-foundation aria-label="Heading self-link"></a></h3><p><a href=https://learn.microsoft.com/en-ca/entra/fundamentals/whatis>Microsoft Entra</a> is Microsoft&rsquo;s cloud-based identity and access management service, more recently know as Microsoft Entra. It&rsquo;s the backbone for managing users, groups, and access to Azure resources. When you sign up for Azure, an Azure AD tenant is typically created for you.</p><h4 id=mfa-authentication>MFA Authentication<a class=td-heading-self-link href=#mfa-authentication aria-label="Heading self-link"></a></h4><p>MFA is a critical security layer to enforce ideally for all users. You can enable MFA through</p><ul><li><a href=https://docs.microsoft.com/azure/active-directory/fundamentals/concept-fundamentals-security-defaults>Security Defaults</a> (a baseline for all users)</li><li>Configure more granular policies using <a href=https://learn.microsoft.com/en-us/entra/identity/authentication/tutorial-enable-azure-mfa#configure-the-conditions-for-multifactor-authentication>Azure AD Conditional Access</a></li></ul><h4 id=new-user>New User<a class=td-heading-self-link href=#new-user aria-label="Heading self-link"></a></h4><p>Before creating resources, avoid using the administrative user account created by default when registering a new <a href=https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/landing-zone/design-area/resource-org-subscriptions>Azure Subscription</a>. Create a new user to provide Role-Based Access Control (RBAC) and MFA authentication. Use the <a href=https://learn.microsoft.com/en-us/entra/fundamentals/how-to-create-delete-users#invite-an-external-user>External Invite</a> mechanism to invite a new user into the Azure AD Tenant.</p><h4 id=new-ad-group--role-based-access-control-rbac>New AD Group & Role Based Access Control (RBAC)<a class=td-heading-self-link href=#new-ad-group--role-based-access-control-rbac aria-label="Heading self-link"></a></h4><p>Create <a href=https://learn.microsoft.com/en-us/entra/fundamentals/how-to-manage-groups>Microsoft Entra ID Groups</a> to apply permissions and access controls across multiple users. Add the newly create user following the <a href=https://learn.microsoft.com/en-us/entra/fundamentals/how-to-manage-groups#add-members-or-owners-of-a-group>Add Members</a> guide. Grant permissions to the newly created group using Azure RBAC <a href=https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#role-assignments>Role Assignment</a>. Assign the <code>Reader</code> role.</p><h4 id=conditional-access-policies>Conditional Access Policies<a class=td-heading-self-link href=#conditional-access-policies aria-label="Heading self-link"></a></h4><p>We can harden security when accessing Azure subscription/ tenant by utilizing <a href=https://learn.microsoft.com/en-us/entra/identity/conditional-access/concept-conditional-access-policies>Conditional Access Policies</a> by restricting access to specific IPs. Before defining the policy, create a <a href=https://learn.microsoft.com/en-us/entra/identity/conditional-access/concept-assignment-network#how-are-these-locations-defined>Named Location</a> to name and refer to the trusted IP range.</p><h3 id=cli-access-for-usersdevelopers>CLI Access for Users/Developers<a class=td-heading-self-link href=#cli-access-for-usersdevelopers aria-label="Heading self-link"></a></h3><p>To authenticate the Azure CLI and allow users to manage Azure resources from their command line, the primary method is interactive login. This process leverages Microsoft Entra ID for authentication, including any configured MFA or Conditional Access policies.</p><ul class="nav nav-tabs justify-content-end" id=tabs-0 role=tablist><li class=nav-item><button class="nav-link disabled" id=tabs-00-00-tab data-bs-toggle=tab data-bs-target=#tabs-00-00 role=tab aria-controls=tabs-00-00 aria-selected=false>
<strong>Examples</strong>:</button></li><li class=nav-item><button class="nav-link active" id=tabs-00-01-tab data-bs-toggle=tab data-bs-target=#tabs-00-01 role=tab data-td-tp-persist=shell aria-controls=tabs-00-01 aria-selected=true>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI</button></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade" id=tabs-00-00 role=tabpanel aria-labelled-by=tabs-00-00-tab tabindex=0><pre tabindex=0><code></code></pre></div><div class="tab-pane fade show active" id=tabs-00-01 role=tabpanel aria-labelled-by=tabs-00-01-tab tabindex=0><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># Login to Azure (this will open a browser for authentication)</span>
</span></span><span style=display:flex><span>  az login
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># Set the default Subscription and Resource Group</span>
</span></span><span style=display:flex><span>  az account <span style=color:#204a87>set</span> --subscription <span style=color:#ce5c00;font-weight:700>[</span>INSERT SUBSCRIPTION ID<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>  az configure --defaults <span style=color:#000>group</span><span style=color:#ce5c00;font-weight:700>=[</span>INSERT RESOURCE GROUP NAME<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># [Prefered] If you have a User-Assigned Managed Identity</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># Sign-in to Azure with the User-Assigned Managed Identity</span>
</span></span><span style=display:flex><span>  az login --identity --client-id <span style=color:#ce5c00;font-weight:700>[</span>INSERT CLIENT ID<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div></div><h2 id=service-principal-programmatic-access>Service Principal (Programmatic Access)<a class=td-heading-self-link href=#service-principal-programmatic-access aria-label="Heading self-link"></a></h2><p>To enable programmatic access to Azure resources, you can create a Service Principal using either:</p><ul><li>Enterprise Application (Service Principal) used by applications, services, or automation tools to access specific Azure resources programmatically.</li><li>User-Assigned Managed Identity, an identity created as a standalone Azure resource, which can be assigned to one or more Azure resources. It is managed by Azure and does not require you to handle credentials. Recommended for scenarios where you want to share an identity across multiple resources.</li><li>System-Assigned Managed Identity, an identity enabled directly on an Azure resource (such as a VM, App Service, or Function). The lifecycle of this identity is tied to the resource, and credentials are managed automatically by Azure. Use this when the identity is only needed for a single resource.</li></ul><p>For most automation and service-to-service scenarios, Azure recommends using Managed Identities and short-term credentials. These credentials are generated dynamically and do not require you to manage or rotate long-term secrets.</p><h3 id=enterprise-application>Enterprise Application<a class=td-heading-self-link href=#enterprise-application aria-label="Heading self-link"></a></h3><h4 id=programmatic-steps>Programmatic Steps<a class=td-heading-self-link href=#programmatic-steps aria-label="Heading self-link"></a></h4><ul class="nav nav-tabs justify-content-end" id=tabs-1 role=tablist><li class=nav-item><button class="nav-link disabled" id=tabs-01-00-tab data-bs-toggle=tab data-bs-target=#tabs-01-00 role=tab aria-controls=tabs-01-00 aria-selected=false>
<strong>Examples</strong>:</button></li><li class=nav-item><button class="nav-link active" id=tabs-01-01-tab data-bs-toggle=tab data-bs-target=#tabs-01-01 role=tab data-td-tp-persist=shell aria-controls=tabs-01-01 aria-selected=true>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI</button></li><li class=nav-item><button class=nav-link id=tabs-01-02-tab data-bs-toggle=tab data-bs-target=#tabs-01-02 role=tab aria-controls=tabs-01-02 aria-selected=false>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI (Destroy) icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI (Destroy)</button></li><li class=nav-item><button class=nav-link id=tabs-01-03-tab data-bs-toggle=tab data-bs-target=#tabs-01-03 role=tab data-td-tp-persist=hcl aria-controls=tabs-01-03 aria-selected=false>
<span style=vertical-align:middle><img src=https://cdn.simpleicons.org/terraform/5835CC alt="Terraform icon" style=height:1em;vertical-align:middle;margin-right:.3em></span>
Terraform</button></li></ul><div class=tab-content id=tabs-1-content><div class="tab-pane fade" id=tabs-01-00 role=tabpanel aria-labelled-by=tabs-01-00-tab tabindex=1><pre tabindex=0><code></code></pre></div><div class="tab-pane fade show active" id=tabs-01-01 role=tabpanel aria-labelled-by=tabs-01-01-tab tabindex=1><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_RESOURCE_GROUP</span><span style=color:#ce5c00;font-weight:700>=</span>example-rg
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_LOCATION</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;eastus&#34;</span> <span style=color:#8f5902;font-style:italic># Choose your desired Azure region</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a new Azure Resource Group</span>
</span></span><span style=display:flex><span>az group create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name example-rg <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --location <span style=color:#000>$AZURE_LOCATION</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a new Microsoft Entra AD Group</span>
</span></span><span style=display:flex><span>az ad group create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --display-name example-group <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --mail-nickname ex-group
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a new Service Principal (Application Registration)</span>
</span></span><span style=display:flex><span>az ad sp create-for-rbac <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name example-sp <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --skip-assignment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Assign the &#34;Reader&#34; role to the AD Group for the Resource Group</span>
</span></span><span style=display:flex><span>az role assignment create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --assignee <span style=color:#4e9a06>&#34;example-group&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --role Reader <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group example-rg
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-01-02 role=tabpanel aria-labelled-by=tabs-01-02-tab tabindex=1><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Remove the Reader role assignment from the AD Group</span>
</span></span><span style=display:flex><span>az role assignment delete <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --assignee <span style=color:#4e9a06>&#34;example-group&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --role Reader <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group example-rg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Delete the Service Principal</span>
</span></span><span style=display:flex><span>az ad sp delete --id example-sp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Delete the AD Group</span>
</span></span><span style=display:flex><span>az ad group delete --group <span style=color:#4e9a06>&#34;example-group&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Delete the Resource Group (removes all resources within it!)</span>
</span></span><span style=display:flex><span>az group delete --name example-rg
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-01-03 role=tabpanel aria-labelled-by=tabs-01-03-tab tabindex=1><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-HCL data-lang=HCL><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##---------------------------------------------------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## AZUREAD PROVIDER
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## Azure Active Directory (AzureAD) provider authenticated with CLI.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##---------------------------------------------------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>provider</span> <span style=color:#4e9a06>&#34;azuread&#34;</span> {
</span></span><span style=display:flex><span><span style=color:#000>  alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;tokengen&#34;</span>
</span></span><span style=display:flex><span>}<span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##---------------------------------------------------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## AZURRM PROVIDER
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## Azure Resource Manager (Azurerm) provider authenticated with CLI.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##---------------------------------------------------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>provider</span> <span style=color:#4e9a06>&#34;azurerm&#34;</span> {
</span></span><span style=display:flex><span><span style=color:#000>  alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;tokengen&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>features</span> {}
</span></span><span style=display:flex><span>}<span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##---------------------------------------------------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## AZURE SERVICE ACCOUNT MODULE
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## This module provisions an Azure service account along with associated roles and security groups.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## Parameters:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## - `application_display_name`: The display name of the Azure application.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## - `role_name`: The name of the role for the Azure service account.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## - `security_group_name`: The name of the security group.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## Providers:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## - `azuread.tokengen`: Alias for the Azure AD provider for generating tokens.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## - `azurerm.tokengen`: Alias for the Azure Resource Manager (Azurerm) provider for generating tokens.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>##---------------------------------------------------------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>module</span> <span style=color:#4e9a06>&#34;azure_service_account&#34;</span> {
</span></span><span style=display:flex><span><span style=color:#000>  source</span>  <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;github.com/sim-parables/terraform-azure-service-account&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>  application_display_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;example-service-account&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>  role_name</span>                <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;example-service-account-role&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>  security_group_name</span>      <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;example-group&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>  providers</span> <span style=color:#ce5c00;font-weight:700>=</span> {
</span></span><span style=display:flex><span><span style=color:#000>    azuread.tokengen</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>azuread</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>tokengen</span>
</span></span><span style=display:flex><span><span style=color:#000>    azurerm.tokengen</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>azurerm</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>tokengen</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div></div><h4 id=console>Console<a class=td-heading-self-link href=#console aria-label="Heading self-link"></a></h4><p>For applications, services, or automation tools that need to access or modify Azure resources without direct user interaction, use Service Principals. Create a new <a href=https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-service-principal-portal#register-an-application-with-microsoft-entra-id-and-create-a-service-principal>Service Principal</a> can be used for applications, services or automation tools which need to access or modify Azure resources without direct user interaction. However, SPs require credebtials and token management for authentication which can pose a security risk if handled incorrectly.</p><h3 id=user-assigned-managed-identities>User-Assigned Managed Identities<a class=td-heading-self-link href=#user-assigned-managed-identities aria-label="Heading self-link"></a></h3><h4 id=programmatic-steps-1>Programmatic Steps<a class=td-heading-self-link href=#programmatic-steps-1 aria-label="Heading self-link"></a></h4><ul class="nav nav-tabs justify-content-end" id=tabs-2 role=tablist><li class=nav-item><button class="nav-link disabled" id=tabs-02-00-tab data-bs-toggle=tab data-bs-target=#tabs-02-00 role=tab aria-controls=tabs-02-00 aria-selected=false>
<strong>Examples</strong>:</button></li><li class=nav-item><button class="nav-link active" id=tabs-02-01-tab data-bs-toggle=tab data-bs-target=#tabs-02-01 role=tab data-td-tp-persist=shell aria-controls=tabs-02-01 aria-selected=true>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI</button></li><li class=nav-item><button class=nav-link id=tabs-02-02-tab data-bs-toggle=tab data-bs-target=#tabs-02-02 role=tab aria-controls=tabs-02-02 aria-selected=false>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI (Destroy) icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI (Destroy)</button></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade" id=tabs-02-00 role=tabpanel aria-labelled-by=tabs-02-00-tab tabindex=2><pre tabindex=0><code></code></pre></div><div class="tab-pane fade show active" id=tabs-02-01 role=tabpanel aria-labelled-by=tabs-02-01-tab tabindex=2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a User-Assigned Managed Identity</span>
</span></span><span style=display:flex><span>az identity create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name example-sp-managed-identity <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group example-rg <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --location useast
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># (Optional) Assign a role to the Managed Identity for a resource group</span>
</span></span><span style=display:flex><span>az role assignment create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --assignee <span style=color:#4e9a06>&#34;example-group&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --role Reader <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group example-rg
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-02-02 role=tabpanel aria-labelled-by=tabs-02-02-tab tabindex=2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Remove the Reader role assignment from the Managed Identity (if assigned)</span>
</span></span><span style=display:flex><span>az role assignment delete <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --assignee <span style=color:#4e9a06>&#34;example-group&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --role Reader <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group example-rg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Delete the User-Assigned Managed Identity</span>
</span></span><span style=display:flex><span>az identity delete <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name example-sp-managed-identity <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group example-rg
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div></div><h4 id=console-1>Console<a class=td-heading-self-link href=#console-1 aria-label="Heading self-link"></a></h4><p>Managed Identities are <a href=https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview>Workload Identities</a> which manage Service Principal and authentication without needing to managed secrets and credentials independently. Create a <a href="https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/how-manage-user-assigned-managed-identities?pivots=identity-mi-methods-azp#create-a-user-assigned-managed-identity">User-Assigned Managed Identity</a> in place of a Service Principal for the same use cases, and apply necessary roles for least-priviledge access. Finalize the configuration of the User-Assigned Managed Identity by <a href="https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/how-manage-user-assigned-managed-identities?pivots=identity-mi-methods-azp#create-a-user-assigned-managed-identity">Managing Access</a> to restrict use to specific users or groups.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2272d5c519c02840f7ed49134a7bb4c7>2 - Terraform Backend</h1><div class=lead>Azure - Optional Configurations When Not Using Terraform.io Workspace Backends.</div><h1 id=terraform-backend-with-azure>Terraform Backend with Azure<a class=td-heading-self-link href=#terraform-backend-with-azure aria-label="Heading self-link"></a></h1><p>Using Azure as the backend for Terraform state is a robust and versatile option for managing infrastructure as code. By storing Terraform state in an Azure Blob Storage container, teams can leverage Azure&rsquo;s comprehensive security features, including encryption at rest and in transit, access controls via Azure Active Directory (Azure AD) and Role-Based Access Control (RBAC), and versioning capabilities. Azure Blob Storage offers a highly durable and available storage solution, ensuring that Terraform state is consistently accessible and protected. Furthermore, using Azure for the backend allows teams to utilize Azure AD for fine-grained control over who can read and write to the state file and manage state locking. This setup also integrates well with other Azure services like Azure Functions and Azure Monitor, enabling automation and monitoring of Terraform workflows for a seamless infrastructure management experience.</p><h2 id=cli-steps>CLI Steps<a class=td-heading-self-link href=#cli-steps aria-label="Heading self-link"></a></h2><ul class="nav nav-tabs justify-content-end" id=tabs-0 role=tablist><li class=nav-item><button class="nav-link disabled" id=tabs-00-00-tab data-bs-toggle=tab data-bs-target=#tabs-00-00 role=tab aria-controls=tabs-00-00 aria-selected=false>
<strong>Examples</strong>:</button></li><li class=nav-item><button class="nav-link active" id=tabs-00-01-tab data-bs-toggle=tab data-bs-target=#tabs-00-01 role=tab data-td-tp-persist=shell aria-controls=tabs-00-01 aria-selected=true>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI (Create) icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI (Create)</button></li><li class=nav-item><button class=nav-link id=tabs-00-02-tab data-bs-toggle=tab data-bs-target=#tabs-00-02 role=tab aria-controls=tabs-00-02 aria-selected=false>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI (Destroy) icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI (Destroy)</button></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade" id=tabs-00-00 role=tabpanel aria-labelled-by=tabs-00-00-tab tabindex=0><pre tabindex=0><code></code></pre></div><div class="tab-pane fade show active" id=tabs-00-01 role=tabpanel aria-labelled-by=tabs-00-01-tab tabindex=0><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>mkdir -p ~/development/test/example_azure_tf_backend
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> ~/development/test/example_azure_tf_backend
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Setting</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_LOCATION</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;eastus&#34;</span> <span style=color:#8f5902;font-style:italic># Choose your desired Azure region</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_CLIENT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az identity list <span style=color:#000;font-weight:700>|</span> head -n 1<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>RAND_SUFFIX</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>openssl rand -hex 4<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_RESOURCE_GROUP_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;rg-tfstate-</span><span style=color:#4e9a06>${</span><span style=color:#000>RAND_SUFFIX</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Azure Storage Account names must be 3-24 characters, lowercase letters and numbers, and globally unique.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_STORAGE_ACCOUNT_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;tfstate-</span><span style=color:#4e9a06>${</span><span style=color:#000>RAND_SUFFIX</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span> <span style=color:#000;font-weight:700>|</span> tr <span style=color:#4e9a06>&#39;[:upper:]&#39;</span> <span style=color:#4e9a06>&#39;[:lower:]&#39;</span> <span style=color:#000;font-weight:700>|</span> sed <span style=color:#4e9a06>&#39;s/[^a-z0-9]//g&#39;</span> <span style=color:#000;font-weight:700>|</span> cut -c1-24<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_STORAGE_CONTAINER_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;tfstate&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>TF_STATE_KEY</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;sandbox/terraform.tfstate&#34;</span> <span style=color:#8f5902;font-style:italic># Path for the Terraform state file in the container</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Login to Azure</span>
</span></span><span style=display:flex><span>az login --identity --client-id <span style=color:#000>$AZURE_CLIENT_ID</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Get Subscription and Tenant IDs for Terraform configuration</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_SUBSCRIPTION_ID_FOR_TF</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az account show --query id -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_TENANT_ID_FOR_TF</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az account show --query tenantId -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a Resource Group for the Terraform backend</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az_group_create</span>
</span></span><span style=display:flex><span>az group create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --location <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_LOCATION</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>az configure --defaults <span style=color:#000>group</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a Storage Account for Terraform State</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># https://docs.microsoft.com/en-us/cli/azure/storage/account?view=azure-cli-latest#az_storage_account_create</span>
</span></span><span style=display:flex><span>az storage account create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_STORAGE_ACCOUNT_NAME</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --resource-group <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --location <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_LOCATION</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --sku Standard_LRS <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --kind StorageV2 <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --encryption-services blob <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --allow-blob-public-access <span style=color:#204a87>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create a Blob Container for Terraform State</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># https://docs.microsoft.com/en-us/cli/azure/storage/container?view=azure-cli-latest#az_storage_container_create</span>
</span></span><span style=display:flex><span>az storage container create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_STORAGE_CONTAINER_NAME</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --account-name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_STORAGE_ACCOUNT_NAME</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Get the Object ID (Principal ID) of the managed identity&#39;s service principal using its Client ID.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MANAGED_IDENTITY_OBJECT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad sp show --id <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_CLIENT_ID</span><span style=color:#4e9a06>&#34;</span> --query <span style=color:#4e9a06>&#34;id&#34;</span> -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># AZURE_SUBSCRIPTION_ID_FOR_TF is already set and can be used for the scope.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>CONTAINER_SCOPE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;/subscriptions/</span><span style=color:#000>$AZURE_SUBSCRIPTION_ID_FOR_TF</span><span style=color:#4e9a06>/resourceGroups/</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span><span style=color:#4e9a06>/providers/Microsoft.Storage/storageAccounts/</span><span style=color:#000>$AZURE_STORAGE_ACCOUNT_NAME</span><span style=color:#4e9a06>/blobServices/default/containers/</span><span style=color:#000>$AZURE_STORAGE_CONTAINER_NAME</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>az role assignment create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --role <span style=color:#4e9a06>&#34;Storage Blob Data Contributor&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --assignee-object-id <span style=color:#4e9a06>&#34;</span><span style=color:#000>$MANAGED_IDENTITY_OBJECT_ID</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --assignee-principal-type ServicePrincipal <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --scope <span style=color:#4e9a06>&#34;</span><span style=color:#000>$CONTAINER_SCOPE</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Role assignment may take a moment to propagate. Wait for 30 seconds before continuing.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Configure Terraform</span>
</span></span><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOT &gt; backend.conf
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>resource_group_name  = &#34;$AZURE_RESOURCE_GROUP_NAME&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>storage_account_name = &#34;$AZURE_STORAGE_ACCOUNT_NAME&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>container_name       = &#34;$AZURE_STORAGE_CONTAINER_NAME&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>key                  = &#34;$TF_STATE_KEY&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>use_azuread_auth     = true # Authenticate using Azure Active Directory.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># Explicitly use the managed identity (whose client ID is in $AZURE_CLIENT_ID)
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># for backend authentication. The `az login --identity` command sets the CLI context,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># and these details ensure Terraform uses that specific identity for the backend.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>client_id            = &#34;$AZURE_CLIENT_ID&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>subscription_id      = &#34;$AZURE_SUBSCRIPTION_ID_FOR_TF&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>tenant_id            = &#34;$AZURE_TENANT_ID_FOR_TF&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOT</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOT &gt; terraform.tfvars
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>azure_subscription_id            = &#34;$AZURE_SUBSCRIPTION_ID_FOR_TF&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>azure_tenant_id                  = &#34;$AZURE_TENANT_ID_FOR_TF&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>user_assigned_identity_client_id = &#34;$AZURE_CLIENT_ID&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># azure_location                 = &#34;$AZURE_LOCATION&#34; # Example if you have a location variable
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># You can define variables for your Azure resources here if needed.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># For example, if your main.tf creates resources in a specific location:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># location = &#34;East US&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOT</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOT &gt; variables.tf
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>variable &#34;user_assigned_identity_client_id&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  type        = string
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  description = &#34;Client ID of the User-Assigned Managed Identity to use for authentication by the provider.&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>variable &#34;azure_subscription_id&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  type        = string
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  description = &#34;Azure Subscription ID to be used by the Azure provider.&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>variable &#34;azure_tenant_id&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  type        = string
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  description = &#34;Azure Tenant ID to be used by the Azure provider.&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># variable &#34;azure_location&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>#   type        = string
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>#   description = &#34;The Azure region where resources will be deployed.&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>#   default     = &#34;East US&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># }
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOT</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOT &gt; main.tf
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>/* Azure Blob Storage managed terraform state - configurations in backend.conf */
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>terraform {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  backend &#34;azurerm&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    // Backend configuration is provided via the backend.conf file
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    // during `terraform init -backend-config=backend.conf`
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  }
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>provider &#34;azurerm&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  features {}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  # Explicitly configure the provider to use the User-Assigned Managed Identity.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  # The values are supplied through terraform.tfvars (sourced from script variables).
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  # This ensures Terraform uses the specified managed identity for managing Azure resources.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  use_msi         = true
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  client_id       = var.user_assigned_identity_client_id
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  subscription_id = var.azure_subscription_id
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  tenant_id       = var.azure_tenant_id
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># Example: Add a data source to verify provider configuration
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>data &#34;azurerm_subscription&#34; &#34;current&#34; {}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>output &#34;current_azure_subscription_display_name&#34; {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  value = data.azurerm_subscription.current.display_name
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOT</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Test Terraform</span>
</span></span><span style=display:flex><span>terraform init -backend-config<span style=color:#ce5c00;font-weight:700>=</span>backend.conf
</span></span><span style=display:flex><span>terraform plan
</span></span><span style=display:flex><span>terraform apply --auto-approve
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-00-02 role=tabpanel aria-labelled-by=tabs-00-02-tab tabindex=0><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Ensure environment variables are set from the Create step</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Tear Down Terraform</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> ~/development/test/example_azure_tf_backend <span style=color:#8f5902;font-style:italic># Ensure you are in the correct directory</span>
</span></span><span style=display:flex><span>terraform destroy --auto-approve
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Remove the Azure Resource Group containing the Storage Account and Container</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This will delete all resources created by this script for the backend.</span>
</span></span><span style=display:flex><span>az group delete <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --yes <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --no-wait <span style=color:#8f5902;font-style:italic># Use --no-wait to run in background, or remove for synchronous deletion</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div></div><h2 id=console-steps>Console Steps<a class=td-heading-self-link href=#console-steps aria-label="Heading self-link"></a></h2><p>This section outlines how to set up the Azure backend for Terraform using the Azure portal. You will need to manually create the necessary Azure resources and then configure your Terraform files.</p><h3 id=create-azure-resources>Create Azure Resources<a class=td-heading-self-link href=#create-azure-resources aria-label="Heading self-link"></a></h3><p>You&rsquo;ll need to create the following resources in the Azure portal. Make sure to note down their names and other relevant properties (like location) as you create them.</p><ul><li><strong>Resource Group:</strong> A container that holds related resources for an Azure solution.<ul><li><a href=https://learn.microsoft.com/azure/azure-resource-manager/management/manage-resource-groups-portal>Learn how to create a Resource Group in the Azure portal</a></li></ul></li><li><strong>Storage Account:</strong> To store your Terraform state file.<ul><li>When creating a <a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-account-create?tabs=azure-portal">Storage Account</a>, ensure you configure it appropriately for a Terraform backend (e.g., Account kind: <code>StorageV2</code>, Performance: <code>Standard</code>, Replication: <code>Locally-redundant storage (LRS)</code>). It&rsquo;s also recommended to disable public blob access for security. Add a Storage Container for the state file.</li></ul></li></ul><h3 id=configure-managed-identity-and-permissions>Configure Managed Identity and Permissions<a class=td-heading-self-link href=#configure-managed-identity-and-permissions aria-label="Heading self-link"></a></h3><p>Terraform will authenticate to Azure using a User-Assigned Managed Identity.</p><ul><li><strong>Assign &lsquo;Storage Blob Data Contributor&rsquo; Role:</strong> <a href="(https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/how-manage-user-assigned-managed-identities?pivots=identity-mi-methods-azp#create-a-user-assigned-managed-identity)">Grant the Managed Identity</a> the necessary permissions to read and write to the blob container by assigning the <code>Storage Blob Data Contributor</code> role to your User-Assigned Managed Identity.</li></ul><h3 id=configure-terraform-files>Configure Terraform Files<a class=td-heading-self-link href=#configure-terraform-files aria-label="Heading self-link"></a></h3><p>After setting up the Azure resources and permissions, you need to create the following <a href=https://developer.hashicorp.com/terraform/language/backend/azurerm>Terraform Backend Configuration</a> <code>backend.conf</code> with the actual values you obtained from the Azure portal.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#000>resource_group_name</span>  <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;YOUR_RESOURCE_GROUP_NAME&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>storage_account_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;YOUR_STORAGE_ACCOUNT_NAME&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>container_name</span>       <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;YOUR_CONTAINER_NAME&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>key</span>                  <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;sandbox/terraform.tfstate&#34;</span><span style=color:#8f5902;font-style:italic> # Or your desired state file path in the container
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>use_azuread_auth</span>     <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000>client_id</span>            <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;YOUR_MANAGED_IDENTITY_CLIENT_ID&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>subscription_id</span>      <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;YOUR_AZURE_SUBSCRIPTION_ID&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>tenant_id</span>            <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;YOUR_AZURE_TENANT_ID&#34;</span>
</span></span></code></pre></div><p>Once the Azure resources are ready and your Terraform files are configured with the correct values, navigate to your Terraform project directory in your terminal and run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>terraform init -backend-config<span style=color:#ce5c00;font-weight:700>=</span>backend.conf
</span></span><span style=display:flex><span>terraform plan
</span></span><span style=display:flex><span>terraform apply --auto-approve
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1c163698e334dd4401ddcdc57074abd9>3 - OpenID Connect</h1><div class=lead>Azure - Modernized Security for GitOps & CI/CD with GitHub Actions using Microsoft Identity Platform.</div><h1 id=openid-connect-oidc-with-github-actions-and-azure-workload-identity-federation>OpenID Connect (OIDC) with GitHub Actions and Azure Workload Identity Federation<a class=td-heading-self-link href=#openid-connect-oidc-with-github-actions-and-azure-workload-identity-federation aria-label="Heading self-link"></a></h1><p>Azure&rsquo;s <a href=https://learn.microsoft.com/en-us/azure/active-directory/workload-identities/workload-identity-federation>Workload identity federation</a> allows external OpenID Connect (OIDC) providers, like GitHub Actions, to authenticate to Azure Active Directory (Azure AD) and obtain access tokens for Azure resources. This is achieved by configuring a federated identity credential on an Azure AD application registration or user-assigned managed identity. This enables your GitHub Actions workflows to securely access Azure resources without needing to manage or store long-lived secrets (like client secrets or certificates) in GitHub. Instead, workflows exchange their OIDC token for a short-lived Azure AD access token, enhancing security and simplifying credential management for CI/CD pipelines.</p><h2 id=cli-steps>CLI Steps<a class=td-heading-self-link href=#cli-steps aria-label="Heading self-link"></a></h2><ul class="nav nav-tabs justify-content-end" id=tabs-0 role=tablist><li class=nav-item><button class="nav-link disabled" id=tabs-00-00-tab data-bs-toggle=tab data-bs-target=#tabs-00-00 role=tab aria-controls=tabs-00-00 aria-selected=false>
<strong>Examples</strong>:</button></li><li class=nav-item><button class="nav-link active" id=tabs-00-01-tab data-bs-toggle=tab data-bs-target=#tabs-00-01 role=tab data-td-tp-persist=shell aria-controls=tabs-00-01 aria-selected=true>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI (Create) icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI (Create)</button></li><li class=nav-item><button class=nav-link id=tabs-00-02-tab data-bs-toggle=tab data-bs-target=#tabs-00-02 role=tab aria-controls=tabs-00-02 aria-selected=false>
<span style=vertical-align:middle><img src="data:image/svg+xml,%3Csvg%20height=%221024%22%20width=%22896%22%20xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath%20d=%22M831%20127H63c-35.35.0-64%2028.65-64%2064v640c0%2035.35%2028.65%2064%2064%2064h768c35.35.0%2064-28.65%2064-64V191c0-35.35-28.65-64-64-64zM127%20575l128-128L127%20319l64-64%20192%20192L191%20639l-64-64zm512%2064H383v-64h256v64z%22/%3E%3C/svg%3E" alt="CLI (Destroy) icon" style=height:1.5em;vertical-align:middle;margin-right:.3em></span>
CLI (Destroy)</button></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade" id=tabs-00-00 role=tabpanel aria-labelled-by=tabs-00-00-tab tabindex=0><pre tabindex=0><code></code></pre></div><div class="tab-pane fade show active" id=tabs-00-01 role=tabpanel aria-labelled-by=tabs-00-01-tab tabindex=0><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>mkdir -p ~/development/test/example_azure_oidc
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> ~/development/test/example_azure_oidc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## 0. Prerequisites &amp; Configuration</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Ensure Azure CLI (az) is installed and you are logged in.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Run `az login` and `az account set --subscription &#34;YOUR_SUBSCRIPTION_ID&#34;` if needed.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Ensure GitHub CLI (gh) is installed and authenticated if using it to get repo details.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Azure Configuration</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_SUBSCRIPTION_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az account show --query id -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_RESOURCE_GROUP_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az configure --list-defaults --query <span style=color:#4e9a06>&#34;[?name==&#39;group&#39;].value&#34;</span> -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_TENANT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az account show --query tenantId -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># GitHub Configuration</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>GH_OWNER</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;your-github-username-or-org&#34;</span> <span style=color:#8f5902;font-style:italic># Replace with your GitHub username or organization</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>GH_REPO</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;your-github-repo-name&#34;</span>    <span style=color:#8f5902;font-style:italic># Replace with your GitHub repository name</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Azure AD Application and Federated Credential Configuration</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_APP_REG_DISPLAY_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;github-</span><span style=color:#4e9a06>${</span><span style=color:#000>GH_OWNER</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>-</span><span style=color:#4e9a06>${</span><span style=color:#000>GH_REPO</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>-oidc-</span><span style=color:#204a87;font-weight:700>$(</span>openssl rand -hex 2<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_FEDERATED_CREDENTIAL_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;github-federated-credential-</span><span style=color:#204a87;font-weight:700>$(</span>openssl rand -hex 2<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Subject claim for the federated credential (identifies the GitHub Actions workflow)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This example targets the main branch. Adjust as needed (e.g., for specific tags, pull requests, or environments).</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Common subject formats:</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - Specific branch: repo:${GH_OWNER}/${GH_REPO}:ref:refs/heads/main</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - Any branch: repo:${GH_OWNER}/${GH_REPO}:ref:refs/heads/*</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - Any tag: repo:${GH_OWNER}/${GH_REPO}:ref:refs/tags/*</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - Pull requests: repo:${GH_OWNER}/${GH_REPO}:pull_request</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - Specific environment: repo:${GH_OWNER}/${GH_REPO}:environment:production</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>GH_SUBJECT_CLAIM</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;repo:</span><span style=color:#4e9a06>${</span><span style=color:#000>GH_OWNER</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>/</span><span style=color:#4e9a06>${</span><span style=color:#000>GH_REPO</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>:ref:refs/heads/main&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## 1. Create an Azure AD Application Registration</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This application will represent your GitHub Actions workflow in Azure AD.</span>
</span></span><span style=display:flex><span><span style=color:#000>APP_REG_JSON</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad app create --display-name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_APP_REG_DISPLAY_NAME</span><span style=color:#4e9a06>&#34;</span> --sign-in-audience AzureADMyOrg<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_APP_OBJECT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> <span style=color:#000>$APP_REG_JSON</span> <span style=color:#000;font-weight:700>|</span> jq -r <span style=color:#4e9a06>&#39;.id&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_APP_CLIENT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> <span style=color:#000>$APP_REG_JSON</span> <span style=color:#000;font-weight:700>|</span> jq -r <span style=color:#4e9a06>&#39;.appId&#39;</span><span style=color:#204a87;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic># Also known as Application (client) ID</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## 2. Create a Service Principal for the Application Registration (if not already created)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># A service principal is an instance of an application in a directory.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># It&#39;s usually created automatically when the app registration is created.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># We need its Object ID for role assignments.</span>
</span></span><span style=display:flex><span><span style=color:#000>SP_JSON</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad sp create --id <span style=color:#000>$AZURE_APP_CLIENT_ID</span><span style=color:#204a87;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic># This command creates if not exists, or returns existing</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_SERVICE_PRINCIPAL_OBJECT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> <span style=color:#000>$SP_JSON</span> <span style=color:#000;font-weight:700>|</span> jq -r <span style=color:#4e9a06>&#39;.id&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## 3. Add a Federated Identity Credential to the Application Registration</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This configures the trust relationship between Azure AD and GitHub OIDC.</span>
</span></span><span style=display:flex><span>az ad app federated-credential create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --id <span style=color:#000>$AZURE_APP_OBJECT_ID</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --parameters <span style=color:#4e9a06>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;name&#34;: &#34;${AZURE_FEDERATED_CREDENTIAL_NAME}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;issuer&#34;: &#34;https://token.actions.githubusercontent.com&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;subject&#34;: &#34;${GH_SUBJECT_CLAIM}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;description&#34;: &#34;Federated credential for GitHub Actions OIDC&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;audiences&#34;: [&#34;api://AzureADTokenExchange&#34;]
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  }&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>## 4. Grant necessary permissions (Azure RBAC roles) to the Service Principal</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Adjust the role and scope based on what your GitHub Actions workflow needs to do.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Example: Grant &#34;Storage Blob Data Contributor&#34; on a specific resource group.</span>
</span></span><span style=display:flex><span>az role assignment create <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --assignee <span style=color:#000>$AZURE_SERVICE_PRINCIPAL_OBJECT_ID</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --role <span style=color:#4e9a06>&#34;Storage Blob Data Contributor&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --scope <span style=color:#4e9a06>&#34;/subscriptions/</span><span style=color:#000>$AZURE_SUBSCRIPTION_ID</span><span style=color:#4e9a06>/resourceGroups/</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># To grant on the entire subscription: --scope &#34;/subscriptions/$AZURE_SUBSCRIPTION_ID&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-00-02 role=tabpanel aria-labelled-by=tabs-00-02-tab tabindex=0><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Ensure environment variables from the Create step are set, or re-define them:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Retrieve IDs if not set (assuming display name is unique enough for this script)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_APP_OBJECT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad app list --display-name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_APP_REG_DISPLAY_NAME</span><span style=color:#4e9a06>&#34;</span> --query <span style=color:#4e9a06>&#34;[0].id&#34;</span> -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_APP_CLIENT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad app show --id <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_APP_OBJECT_ID</span><span style=color:#4e9a06>&#34;</span> --query <span style=color:#4e9a06>&#34;appId&#34;</span> -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>AZURE_SERVICE_PRINCIPAL_OBJECT_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad sp list --display-name <span style=color:#4e9a06>&#34;</span><span style=color:#000>$AZURE_APP_REG_DISPLAY_NAME</span><span style=color:#4e9a06>&#34;</span> --query <span style=color:#4e9a06>&#34;[?appId==&#39;</span><span style=color:#000>$AZURE_APP_CLIENT_ID</span><span style=color:#4e9a06>&#39;].id&#34;</span> -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. Remove Azure RBAC role assignments granted to the Service Principal</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># You need to know the role and scope that was assigned.</span>
</span></span><span style=display:flex><span>az role assignment delete <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --assignee <span style=color:#000>$AZURE_SERVICE_PRINCIPAL_OBJECT_ID</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --role <span style=color:#4e9a06>&#34;Storage Blob Data Contributor&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --scope <span style=color:#4e9a06>&#34;/subscriptions/</span><span style=color:#000>$AZURE_SUBSCRIPTION_ID</span><span style=color:#4e9a06>/resourceGroups/</span><span style=color:#000>$AZURE_RESOURCE_GROUP_NAME</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. Delete the Federated Identity Credential</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># To delete a specific federated credential, you&#39;d ideally use its ID.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Listing them to find the one to delete if name is known:</span>
</span></span><span style=display:flex><span><span style=color:#000>CREDENTIAL_ID</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>az ad app federated-credential list --id <span style=color:#000>$AZURE_APP_OBJECT_ID</span> --query <span style=color:#4e9a06>&#34;[?name==&#39;</span><span style=color:#000>$AZURE_FEDERATED_CREDENTIAL_NAME</span><span style=color:#4e9a06>&#39;].id&#34;</span> -o tsv<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>az ad app federated-credential delete --id <span style=color:#000>$AZURE_APP_OBJECT_ID</span> --federated-credential-id <span style=color:#000>$CREDENTIAL_ID</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 3. Delete the Azure AD Application Registration</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This will also delete the associated Service Principal.</span>
</span></span><span style=display:flex><span>az ad app delete --id <span style=color:#000>$AZURE_APP_OBJECT_ID</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  </span></span></code></pre></div></div></div><h2 id=console-steps>Console Steps<a class=td-heading-self-link href=#console-steps aria-label="Heading self-link"></a></h2><h3 id=1-create-azure-ad-application-registration>1. Create Azure AD Application Registration<a class=td-heading-self-link href=#1-create-azure-ad-application-registration aria-label="Heading self-link"></a></h3><p>Begin this OIDC process by first <a href=https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application>Registering a Client Application</a> in Microsoft Entra ID. Provide a name like <code>github-actions-myrepo-oidc</code>, and note down the <strong>Application (client) ID</strong>.</p><h3 id=2-add-a-federated-identity-credential>2. Add a Federated Identity Credential<a class=td-heading-self-link href=#2-add-a-federated-identity-credential aria-label="Heading self-link"></a></h3><p>Once the App Registration is created, configure <a href=https://learn.microsoft.com/en-us/entra/workload-id/workload-identity-federation>Workload Identity Federation</a> to establish <a href="https://learn.microsoft.com/en-us/entra/workload-id/workload-identity-federation-create-trust?pivots=identity-wif-apps-methods-azp#github-actions">Trust with GitHub Actions OIDC</a>.</p><p><strong>Example Identities for GitHub Actions in Azure Portal (Subject Identifier in Federated Credential):</strong></p><ul><li>To allow workflows from a specific repository and specific branch (e.g., <code>main</code>):
<code>repo:GITHUB_OWNER/GITHUB_REPO_NAME:ref:refs/heads/main</code></li><li>To allow workflows from a specific repository and specific environment (e.g., <code>production</code>):
<code>repo:GITHUB_OWNER/GITHUB_REPO_NAME:environment:production</code></li></ul><p><em>Also, a managed identity can be configured to establish trust with Github Actions OIDC. More details <a href="https://learn.microsoft.com/en-us/entra/workload-id/workload-identity-federation-create-trust-user-assigned-managed-identity?pivots=identity-wif-mi-methods-azp">here</a></em></p><h3 id=3-grant-permissions-assign-azure-rbac-roles-to-the-service-principal>3. Grant Permissions (Assign Azure RBAC Roles) to the Service Principal<a class=td-heading-self-link href=#3-grant-permissions-assign-azure-rbac-roles-to-the-service-principal aria-label="Heading self-link"></a></h3><p>The App Registration has an associated Service Principal. You need to <a href=https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-steps>Grant this Service Principal</a> the necessary permissions (Azure RBAC roles) on the Azure resources your GitHub Actions workflow will manage.
Select the appropriate <strong>Role</strong> (e.g., <code>Contributor</code>, <code>Reader</code>, <code>Storage Blob Data Contributor</code>) that provides the least privilege necessary.</p><p><strong>Assign roles</strong>: Assign the necessary Azure RBAC roles to the Service Principal of your App Registration. For example:</p><ul><li><code>github-cicd-read-sp</code> might be impersonable by <code>repo:ORG/REPO:ref:refs/heads/*</code> (any branch) and have the <code>Reader</code> role on a resource group.</li><li><code>github-cicd-deploy-sp</code> might be impersonable by <code>repo:ORG/REPO:ref:refs/heads/main</code> or <code>repo:ORG/REPO:environment:production</code> and have the <code>Contributor</code> role on a resource group.</li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://example.org/mail aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://example.org/twitter aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Stack Overflow" aria-label="Stack Overflow"><a target=_blank rel=noopener href=https://example.org/stack aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/google/docsy aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Developer mailing list" aria-label="Developer mailing list"><a target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2018&ndash;2025
<span class=td-footer__authors>Docsy Authors | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/docs_blog/js/main.min.115f19af160d1221e5d7ad0bb0ea2960832ce0857063f349661781f47be40740.js integrity="sha256-EV8ZrxYNEiHl160LsOopYIMs4IVwY/NJZheB9HvkB0A=" crossorigin=anonymous></script>
<script defer src=/docs_blog/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script>
<script src=/docs_blog/js/tabpane-persist.js></script></body></html>